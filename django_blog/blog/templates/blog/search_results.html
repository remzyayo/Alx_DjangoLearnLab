<h2>Search results{% if query %} for "{{ query }}"{% endif %}</h2>

{% for post in posts %}
  <article>
    <h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
    <p>{{ post.content|truncatewords:30 }}</p>
    {% if post.tags.all %}
      <p>Tags:
      {% for tag in post.tags.all %}
        <a href="{% url 'blog:posts_by_tag' tag.name %}">#{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
      {% endfor %}
      </p>
    {% endif %}
  </article>
{% empty %}
  <p>No posts match your query.</p>
{% endfor %}

{% include 'pagination.html' with page_obj=posts %}